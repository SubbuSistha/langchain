# LangChain Advanced Chains â€” Parallel & Conditional

---

## ğŸ”¹ Parallel Chain

### What is it
Run **multiple steps at the same time** on the same input.

```
Input
  â†“
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â†“           â†“           â†“
Step A     Step B     Step C
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
         Output
```

ğŸ‘‰ Used when you want **multiple results from same input**

---

### Example

```python
from langchain_core.runnables import RunnableParallel

chain = RunnableParallel({
    "capital": prompt1 | llm,
    "states": prompt2 | llm
})

result = chain.invoke({"country": "India"})

print(result)
```

---

### Output

```json
{
  "capital": "New Delhi",
  "states": ["Andhra Pradesh", "Telangana"]
}
```

---

### Use Cases
- Get multiple answers at once
- Parallel API calls
- Multi-task LLM processing
- RAG (retrieve + summarize + classify)

---

### Key Points
- Same input to all steps
- Output is a **dict**
- Faster (parallel execution)

---

## ğŸ”¹ Conditional Chain (Branching)

### What is it
Route input to **different steps based on condition**

```
           Input
             â†“
        Condition Check
         /        \
      True        False
       â†“            â†“
   Step A       Step B
         \        /
          â†“      â†“
           Output
```

ğŸ‘‰ Like **if-else for LLM flows**

---

### Example

```python
from langchain_core.runnables import RunnableBranch

def is_india(x):
    return x["country"] == "India"

chain = RunnableBranch(
    (is_india, prompt_india | llm),
    (lambda x: True, prompt_other | llm)
)

result = chain.invoke({"country": "India"})
```

---

### Use Cases
- Different logic per input
- Query classification
- Routing (math vs general question)
- Multi-agent systems

---

### Key Points
- Works like **if-else**
- First matching condition runs
- Default condition required

---

## ğŸ”¥ Combined Example

```python
# classify â†’ route â†’ parallel execution
classification_chain | routing_chain | parallel_chain
```

---

## ğŸ§  Summary

### Parallel Chain
- Run multiple steps together
- Same input
- Output = dict

```
input â†’ step1
      â†’ step2
      â†’ step3
```

---

### Conditional Chain
- Route based on condition
- Like if-else

```
input â†’ condition â†’ correct step â†’ output
```

---

## ğŸš€ When to Use

| Scenario | Use |
|----------|-----|
| Multiple outputs needed | Parallel |
| Decision-based flow | Conditional |
| Complex workflow | Combine both |
